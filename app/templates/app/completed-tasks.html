{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="csrf-token" content="{{ csrf_token }}">
  <title>Completed Tasks - SmartTask</title>
  <link rel="stylesheet" href="{% static 'app/css/completed-tasks.css' %}" />
</head>
<body>

  <nav>
    <div class="logo">SmartTask</div>
    <ul>
      <li><a href="{% url 'home' %}">Home</a></li>
      <li><a href="{% url 'signup' %}">Signup</a></li>
      <li><a href="{% url 'login' %}">Login</a></li>
      <li><a href="{% url 'profile' %}">Profile</a></li> 
      <li><a href="{% url 'dashboard' %}">Dashboard</a></li>
    </ul>
  </nav>

  <main>
    <h2>âœ… Completed Tasks</h2>

    {% if stats %}
    <div class="task-stats">
      <p>ğŸ¯ Tasks completed today: <strong>{{ stats.today }}</strong></p>
      <p>ğŸ“… This week: <strong>{{ stats.week }}</strong></p>
    </div>
    {% endif %}

    <div class="completed-list">
      {% if tasks %}
        {% for task in tasks %}
          <div class="task-item">
            <h3>âœ”ï¸ {{ task.title }}</h3>
            <p>ğŸ·ï¸ Category: {{ task.category }}</p>
            <p>ğŸ“Œ Start: {{ task.start_date }}</p>
            <p>â³ Due: {{ task.due_date }}</p>
            <p>âœ… Completed on: {{ task.completed_date|date:"M d, Y - H:i A" }}</p>
            <p>â±ï¸ {{ task.completed_date|timesince }} ago</p>

            <form action="{% url 'restore-task' task.id %}" method="post" style="display:inline;">
              {% csrf_token %}
              <button type="submit" class="btn btn-restore">ğŸ” Restore</button>
            </form>

            <form action="{% url 'delete-task' task.id %}" method="post" style="display:inline;" onsubmit="return confirm('Are you sure you want to delete this task?');">
              {% csrf_token %}
              <button type="submit" class="btn btn-delete">ğŸ—‘ï¸ Delete</button>
            </form>
          </div>
        {% endfor %}
      {% else %}
        <p>No completed tasks yet.</p>
      {% endif %}
    </div>
  </main>

</body>
</html>
